spring.application.name=BlueMoon
server.port=8081

# ==============================================================
# CẤU HÌNH DATABASE (DÙNG TRANSACTION POOLER)
# ==============================================================

# 1. URL: Dùng host pooler, cổng 6543, thêm sslmode và prepareThreshold
spring.datasource.url=jdbc:postgresql://aws-1-ap-northeast-1.pooler.supabase.com:6543/postgres?sslmode=require&prepareThreshold=0

# 2. Username: Gồm "postgres" + "." + "project_ref"
spring.datasource.username=postgres.bqacliyspyocscmqfies

# 3. Password: Mật khẩu Database (Nếu ktpm20251 không được thì dùng mật khẩu bạn vừa reset)
spring.datasource.password=ktpm20251

spring.datasource.driver-class-name=org.postgresql.Driver

# ==============================================================
# CẤU HÌNH HIBERNATE / JPA
# ==============================================================
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update

# Cấu hình Dialect & Fix lỗi Metadata
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.boot.allow_jdbc_metadata_access=false

# ==============================================================
# CẤU HÌNH HIKARI CP (GIỮ KẾT NỐI ỔN ĐỊNH)
# ==============================================================
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000

# Client URL for CORS
client.url=http://localhost:3000
